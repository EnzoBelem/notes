### üßæ O que √© `LANGUAGE`?

√â a cl√°usula usada para dizer ao PostgreSQL **como interpretar** o conte√∫do do `BEGIN ... END`.

PostgreSQL suporta v√°rias linguagens para fun√ß√µes, incluindo:

- `sql` ‚Äì quando a fun√ß√£o √© apenas um **SELECT** direto ou uma l√≥gica simples.
    
- `plpgsql` ‚Äì linguagem procedural interna, parecida com PL/SQL do Oracle, que permite `IF`, `LOOP`, `DECLARE`, vari√°veis etc.
    
- `plpythonu`, `plperl`, `plv8` ‚Äì fun√ß√µes escritas em Python, Perl ou JavaScript, se habilitadas no banco.
    

---

### ‚úÖ O que √© `plpgsql`?

`plpgsql` √© a **linguagem procedural padr√£o do PostgreSQL**, usada para escrever fun√ß√µes mais complexas com:

- **vari√°veis**
    
- **blocos condicionais (`IF`, `CASE`)**
    
- **la√ßos (`LOOP`, `FOR`, `WHILE`)**
    
- **SQL din√¢mico (`EXECUTE`)**
    
- **tratamento de exce√ß√µes**
    

Ela √© interpretada diretamente pelo PostgreSQL (n√£o precisa de depend√™ncias externas).

---

### Exemplo simples:

```sql
CREATE FUNCTION diga_ola(nome TEXT)
RETURNS TEXT
AS $$
BEGIN
    RETURN 'Ol√°, ' || nome || '!';
END;
$$ LANGUAGE plpgsql;
```

---

Se voc√™ tivesse feito a fun√ß√£o s√≥ com um `SELECT` direto, poderia usar `LANGUAGE sql`, por exemplo:

```sql
CREATE FUNCTION obter_soma()
RETURNS INT
AS $$
    SELECT 1 + 1;
$$ LANGUAGE sql;
```

---

### Conclus√£o

- `LANGUAGE plpgsql` diz ao PostgreSQL que a fun√ß√£o est√° escrita na linguagem procedural dele.
    
- Isso permite usar estruturas de controle como `IF`, `DECLARE`, `LOOP`, `EXECUTE`.
    
- √â ideal para l√≥gica mais elaborada, como constru√ß√£o din√¢mica de queries ou uso de vari√°veis.
